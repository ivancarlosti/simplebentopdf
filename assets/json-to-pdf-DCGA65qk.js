import"./lucide-iiCyoXQ9.js";import{J as y,k as b,l as w,r as v}from"./shortcuts-CaOq6dM1.js";import{i as L}from"./shortcuts-init-cT1Qr9ko.js";import"./mobileMenu-95gHE_Cx.js";import"./full-width-B8_sb6NU.js";import"./version-CEpUk6qs.js";const f=new Worker(new URL("/assets/json-to-pdf.worker-PMypEDs1.js",import.meta.url));let n=[];const m=document.getElementById("jsonFiles"),i=document.getElementById("convertBtn"),l=document.getElementById("status-message"),a=document.getElementById("fileList"),d=document.getElementById("back-to-tools");function s(t,e="info"){l.textContent=t,l.className=`mt-4 p-3 rounded-lg text-sm ${e==="success"?"bg-green-900 text-green-200":e==="error"?"bg-red-900 text-red-200":"bg-blue-900 text-blue-200"}`,l.classList.remove("hidden")}function k(){l.classList.add("hidden")}function S(){if(a.innerHTML="",n.length===0){a.classList.add("hidden");return}a.classList.remove("hidden"),n.forEach(t=>{const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm mb-2";const r=document.createElement("span");r.className="truncate font-medium text-gray-200",r.textContent=t.name;const o=document.createElement("span");o.className="flex-shrink-0 ml-4 text-gray-400",o.textContent=w(t.size),e.append(r,o),a.appendChild(e)})}m.addEventListener("change",t=>{const e=t.target;e.files&&e.files.length>0&&(n=Array.from(e.files),i.disabled=n.length===0,S(),n.length===0?s("Please select at least 1 JSON file","info"):s(`${n.length} file(s) selected. Ready to convert!`,"info"))});async function x(){if(n.length===0){s("Please select at least 1 JSON file","error");return}try{i.disabled=!0,s("Reading files (Main Thread)...","info");const t=await Promise.all(n.map(e=>v(e)));s("Converting JSONs to PDFs...","info"),f.postMessage({command:"convert",fileBuffers:t,fileNames:n.map(e=>e.name)},t)}catch(t){console.error("Error reading files:",t),s(`❌ Error reading files: ${t instanceof Error?t.message:"Unknown error"}`,"error"),i.disabled=!1}}f.onmessage=async t=>{if(i.disabled=!1,t.data.status==="success"){const e=t.data.pdfFiles;try{s("Creating ZIP file...","info");const r=new y;e.forEach(({name:g,data:p})=>{const h=g.replace(/\.json$/i,".pdf"),E=new Uint8Array(p);r.file(h,E)});const o=await r.generateAsync({type:"blob"}),u=URL.createObjectURL(o),c=document.createElement("a");c.href=u,c.download="jsons-to-pdf.zip",b(o,"jsons-to-pdf.zip"),s("✅ JSONs converted to PDF successfully! ZIP download started.","success"),n=[],m.value="",a.innerHTML="",a.classList.add("hidden"),i.disabled=!0,setTimeout(()=>{k()},3e3)}catch(r){console.error("Error creating ZIP:",r),s(`❌ Error creating ZIP: ${r instanceof Error?r.message:"Unknown error"}`,"error")}}else if(t.data.status==="error"){const e=t.data.message||"Unknown error occurred in worker.";console.error("Worker Error:",e),s(`❌ Worker Error: ${e}`,"error")}};d&&d.addEventListener("click",()=>{window.location.href="/"});i.addEventListener("click",x);s("Select JSON files to get started","info");L();
