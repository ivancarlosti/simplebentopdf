import"./lucide-iiCyoXQ9.js";import{J as h,k as y,l as E,r as b}from"./shortcuts-CaOq6dM1.js";import{i as w}from"./shortcuts-init-cT1Qr9ko.js";import"./mobileMenu-95gHE_Cx.js";import"./full-width-B8_sb6NU.js";import"./version-CEpUk6qs.js";const d=new Worker(new URL("/assets/pdf-to-json.worker-B2TK4pBl.js",import.meta.url));let n=[];const f=document.getElementById("pdfFiles"),a=document.getElementById("convertBtn"),l=document.getElementById("status-message"),o=document.getElementById("fileList"),c=document.getElementById("back-to-tools");function s(t,e="info"){l.textContent=t,l.className=`mt-4 p-3 rounded-lg text-sm ${e==="success"?"bg-green-900 text-green-200":e==="error"?"bg-red-900 text-red-200":"bg-blue-900 text-blue-200"}`,l.classList.remove("hidden")}function v(){l.classList.add("hidden")}function k(){if(o.innerHTML="",n.length===0){o.classList.add("hidden");return}o.classList.remove("hidden"),n.forEach(t=>{const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm mb-2";const r=document.createElement("span");r.className="truncate font-medium text-gray-200",r.textContent=t.name;const i=document.createElement("span");i.className="flex-shrink-0 ml-4 text-gray-400",i.textContent=E(t.size),e.append(r,i),o.appendChild(e)})}f.addEventListener("change",t=>{const e=t.target;e.files&&e.files.length>0&&(n=Array.from(e.files),a.disabled=n.length===0,k(),n.length===0?s("Please select at least 1 PDF file","info"):s(`${n.length} file(s) selected. Ready to convert!`,"info"))});async function B(){if(n.length===0){s("Please select at least 1 PDF file","error");return}try{a.disabled=!0,s("Reading files (Main Thread)...","info");const t=await Promise.all(n.map(e=>b(e)));s("Converting PDFs to JSON..","info"),d.postMessage({command:"convert",fileBuffers:t,fileNames:n.map(e=>e.name)},t)}catch(t){console.error("Error reading files:",t),s(`❌ Error reading files: ${t instanceof Error?t.message:"Unknown error"}`,"error"),a.disabled=!1}}d.onmessage=async t=>{if(a.disabled=!1,t.data.status==="success"){const e=t.data.jsonFiles;try{s("Creating ZIP file...","info");const r=new h;e.forEach(({name:m,data:u})=>{const g=m.replace(/\.pdf$/i,".json"),p=new Uint8Array(u);r.file(g,p)});const i=await r.generateAsync({type:"blob"});y(i,"pdfs-to-json.zip"),s("✅ PDFs converted to JSON successfully! ZIP download started.","success"),n=[],f.value="",o.innerHTML="",o.classList.add("hidden"),a.disabled=!0,setTimeout(()=>{v()},3e3)}catch(r){console.error("Error creating ZIP:",r),s(`❌ Error creating ZIP: ${r instanceof Error?r.message:"Unknown error"}`,"error")}}else if(t.data.status==="error"){const e=t.data.message||"Unknown error occurred in worker.";console.error("Worker Error:",e),s(`❌ Worker Error: ${e}`,"error")}};c&&c.addEventListener("click",()=>{window.location.href="/"});a.addEventListener("click",B);s("Select PDF files to get started","info");w();
